{"version":3,"file":"extension.js","mappings":"6GAAA,eACA,QACA,SAEMA,EAAW,EAAAC,UAAUC,iBAAmB,EAAAD,UAAUC,iBAAiB,GAAGC,IAAIC,OAAS,GAEnFC,EAAcC,EAAKC,KACvBP,EACA,eACA,UACA,WACA,OACA,aAEF,IAAIQ,EAAuB,GAalB,EAAAA,WAAAA,EAXTC,EAAGC,SAASL,EAAa,SAAS,CAACM,EAAIC,KACrC,IAAIA,EACF,OAEF,MAAMC,EAAaD,EACbE,EAAiB,mBACvB,IAAIC,EACJ,KAAqD,QAA7CA,EAAQD,EAAeE,KAAKH,KAClCL,EAAWS,KAAKF,EAAM,G,aCxB1BG,EAAOC,QAAUC,QAAQ,S,UCAzBF,EAAOC,QAAUC,QAAQ,K,SCAzBF,EAAOC,QAAUC,QAAQ,O,GCCrBC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaL,QAGrB,IAAID,EAASG,EAAyBE,GAAY,CAGjDJ,QAAS,CAAC,GAOX,OAHAO,EAAoBH,GAAUL,EAAQA,EAAOC,QAASG,GAG/CJ,EAAOC,OACf,C,0FCtBA,eAGA,SACA,SACA,QAEA,oBAAyBQ,GACvB,MAAM3B,EAAW,EAAAC,UAAUC,iBAAmB,EAAAD,UAAUC,iBAAiB,GAAGC,IAAIC,OAAS,GACnFwB,EAAiBtB,EAAKC,KAAKP,EAAU,eAAgB,UAAW,YAEtES,EAAGoB,OAAOD,EAAgBnB,EAAGqB,UAAUC,MAAOpB,IAC5C,GAAIA,EAEF,YADAqB,QAAQC,IAAI,qDAGd,MAAMC,EAAyB,EAAAC,UAAUC,+BAA+B,CAAC,CACnEC,SAAU,MAAOC,OAAQ,QAC1B,CACCD,SAAU,OAAQC,OAAQ,QAC3B,CACDD,SAAU,MAAOC,OAAQ,QACxB,CACCD,SAAU,OAAQC,OAAQ,SAC9B,IAAIC,EACJ,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,KAE/BZ,EAAQa,cAAcvB,KAAKiB,EAAuB,GAEtD,EAEA,MAAMK,EAEIE,6BAA6BC,EAAwBC,GAC3D,MACMC,EADOF,EAASG,OAAOF,GACPG,KAAKC,UAAU,EAAGJ,EAASK,WAEjD,MADc,mCACDC,KAAKL,EACpB,CACAM,uBACER,EACAC,GAEA,GAAKQ,KAAKV,6BAA6BC,EAAUC,GAMjD,OAH0C,EAAAnC,WAAW4C,KACnDC,GAAa,IAAI,EAAAC,eAAeD,EAAW,EAAAE,mBAAmBC,UAGlE,E","sources":["webpack://tnclasshelper/./src/TnClassName.ts","webpack://tnclasshelper/external commonjs \"vscode\"","webpack://tnclasshelper/external node-commonjs \"fs\"","webpack://tnclasshelper/external node-commonjs \"path\"","webpack://tnclasshelper/webpack/bootstrap","webpack://tnclasshelper/./src/extension.ts"],"sourcesContent":["import * as fs from 'fs'\nimport * as path from 'path'\nimport { workspace } from 'vscode'\n\nconst rootPath = workspace.workspaceFolders ? workspace.workspaceFolders[0].uri.fsPath : ''\n\nconst cssFilePath = path.join(\n  rootPath,\n  'node_modules',\n  '@tuniao',\n  'tn-style',\n  'dist',\n  'index.css'\n)\nlet classNames: string[] = []\n\nfs.readFile(cssFilePath, 'utf-8', (err,data) => {\n  if(!data) {\n    return\n  }\n  const cssContent = data\n  const classNameRegex = /\\.([\\w-]+)\\s*\\{/g\n  let match\n  while ((match = classNameRegex.exec(cssContent)) !== null) {\n    classNames.push(match[1])\n  }\n})\nexport { classNames }\n\n","module.exports = require(\"vscode\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { languages, ExtensionContext, CompletionItemProvider,\n         TextDocument, Position, ProviderResult,\n         CompletionItem, CompletionList, CompletionItemKind, workspace }  from 'vscode'\nimport { classNames } from './TnClassName'\nimport * as fs from 'fs'\nimport * as path from 'path'\n\nexport function activate(context: ExtensionContext) {\n  const rootPath = workspace.workspaceFolders ? workspace.workspaceFolders[0].uri.fsPath : ''\n  const dependencyPath = path.join(rootPath, 'node_modules', '@tuniao', 'tn-style')\n\n  fs.access(dependencyPath, fs.constants.F_OK, (err) => {\n    if (err) {\n      console.log('The @tuniao/tn-style dependency is not installed.')\n      return\n    }\n    const htmlCompletionProvider = languages.registerCompletionItemProvider([{\n          language: 'pug', scheme: 'file'\n      }, {\n          language: 'jade', scheme: 'file'\n      }, {\n        language: 'vue', scheme: 'file',\n      }, {\n          language: 'html', scheme: 'file'}], \n      new ClassNameCompletionProvider(),\n      '', ' ', ':', '<', '\"', \"'\", '='\n    )\n    context.subscriptions.push(htmlCompletionProvider)\n  })\n}\n\nclass ClassNameCompletionProvider implements CompletionItemProvider {\n\n  private isCursorInsideClassAttribute(document: TextDocument, position: Position): boolean {\n    const line = document.lineAt(position)\n    const lineText = line.text.substring(0, position.character)\n    const regex = /(?:\\s|^)class\\s*=\\s*[\"'][^\"']*$/i\n    return regex.test(lineText)\n  }\n  provideCompletionItems(\n    document: TextDocument,\n    position: Position\n  ): ProviderResult<CompletionItem[] | CompletionList> {\n    if (!this.isCursorInsideClassAttribute(document, position)) {\n      return undefined\n    }\n    const completionItems: CompletionItem[] = classNames.map(\n      className => new CompletionItem(className, CompletionItemKind.Snippet)\n    )\n    return completionItems\n  }\n}\n"],"names":["rootPath","workspace","workspaceFolders","uri","fsPath","cssFilePath","path","join","classNames","fs","readFile","err","data","cssContent","classNameRegex","match","exec","push","module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","context","dependencyPath","access","constants","F_OK","console","log","htmlCompletionProvider","languages","registerCompletionItemProvider","language","scheme","ClassNameCompletionProvider","subscriptions","isCursorInsideClassAttribute","document","position","lineText","lineAt","text","substring","character","test","provideCompletionItems","this","map","className","CompletionItem","CompletionItemKind","Snippet"],"sourceRoot":""}